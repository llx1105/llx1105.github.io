---
layout: post
title: ==,===,eql?,equal?的区别
category: 技术
tags:
keywords: == === eql? equal?
---

这四个方法都有些细节上的区别，但从效果可以粗略地分为两类，一是比较两者是不是引用自同一个对象，二是比较两者的值是否相同。


#  ==

在Object类层面，这个方法是判断obj和 other_obj是不是同一个对象（可以理解为两者的object_id一定要相同）。但通常子类都会重写 == 方法来加入自己的比较逻辑,如会先做类型转换再做比较。虽然每个子类都对此有不同的实现，但常见的作用就是比较两个对象的值是否相同。

# ===

主要用于case语句中的比较。效果和 == 一样，但一般会被子类重写，来适应case语句的需要。很典型的就是正则表达式的 === 方法。

```
/string/ == "string"  # false
/string/ === "string" # true  为了case语句的比较而改写了Regexp的===方法

```
# eql?

判断比较的两者的值是否相同。和 == 类似，但是有区别的，比如Numeric类型，1.eql?(1.0) 是返回 false 的，因为两者类型不同，而 == 则会做类型转换再比较。

# equal?

判断比较的两者的object_id是否相同。子类不会重写这个方法。所以它的效果在任何对象中都是一样的。


```
2.1.1 :005 > 1 == 1.0
=> true
2.1.1 :006 > 1.eql? 1.0
=> false
2.1.1 :007 > 1.equal? 1.0
=> false
2.1.1 :008 > 'test'.equal? 'test'
=> false
```
